<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>Profile</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content class="ion-padding">
  <ion-card>
    <ion-card-header>
      <div class="photo">
        <ion-avatar slot="start">
          @if (currentUser.profilePicture) {
          <img [src]="currentUser.profilePicture" alt="User Photo" />
          }@else {
          <img src="../../../../assets/images/svgs/person.svg" alt="User Photo" />
          }
        </ion-avatar>
        <div class="detail">
          <ion-card-title>{{currentUser.userName}}</ion-card-title>
          <ion-card-subtitle [routerLink]="['/profile/rating']" routerLinkActive="router-link-active">
            @if (currentUser.rating) {
            <div>4/5 rating</div>
            }@else {
            <div class="rating">No rating given</div>
            }
          </ion-card-subtitle>
        </div>
      </div>
    </ion-card-header>
    <ion-card-content class="ion-no-padding ion-padding-bottom">
      @if (!currentUser.profilePicture) {
      <ion-item lines="none">
        <ion-icon slot="start" name="add-circle-outline"></ion-icon>
        <ion-label color="primary">Add profile picture</ion-label>
      </ion-item>
      }
      <ion-item button lines="none" (click)="openEditCard()">
        <ion-icon slot="start" name="create"></ion-icon>
        <ion-label color="primary">Edit personal details</ion-label>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Verify your profile</ion-card-title>
    </ion-card-header>
    <ion-card-content class="ion-no-padding ion-padding-bottom">
      <ion-item lines="none">
        <ion-icon slot="start" [color]="isGovtIdVerified? 'success':'medium'"
          [name]="isGovtIdVerified ? 'checkmark-circle-outline' : 'add-circle-outline'"></ion-icon>
        <ion-label *ngIf="!isGovtIdVerified" color="primary">
          Verify your Govt. ID
        </ion-label>
        <ion-label *ngIf="isGovtIdVerified" color="primary">
          {{currentUser.userEmail}}
        </ion-label>
      </ion-item>
      <ion-item lines="none">
        <ion-icon slot="start" [color]="isEmailVerified? 'success':'medium'"
          [name]="isEmailVerified?'checkmark-circle-outline':'add-circle-outline'"></ion-icon>
        <ion-label *ngIf="!isEmailVerified" color="primary">
          Confirm email {{currentUser.userEmail}}
        </ion-label>
        <ion-label *ngIf="isEmailVerified" color="primary">
          {{currentUser.userEmail}}
        </ion-label>
      </ion-item>
      <ion-item lines="none">
        <ion-icon slot="start" [color]="isPhoneVerified? 'success':'medium'"
          [name]="isPhoneVerified ? 'checkmark-circle-outline' : 'add-circle-outline'"></ion-icon>
        <ion-label *ngIf="!isPhoneVerified" color="primary">
          Confirm phone number {{currentUser.phone}}
        </ion-label>
        <ion-label *ngIf="isPhoneVerified" color="primary">
          {{currentUser.phone}}
        </ion-label>
      </ion-item>
    </ion-card-content>
  </ion-card>

  <ion-card>
    <ion-card-header>
      <ion-card-title>Vehicles</ion-card-title>
    </ion-card-header>
    <ion-card-content class="ion-no-padding ion-padding-bottom">
      <ng-container *ngIf="vehicle && vehicle.length > 0; else noVehicles">
        <ng-container *ngFor="let item of vehicle; let i = index">
          <ion-item lines="none">
            <ion-label color="primary">Type: {{item.vehicleType}}</ion-label>
            <ion-label color="primary">Name: {{item.vehicleName}}</ion-label>
          </ion-item>
          <ion-item lines="none">
            <ion-label color="primary">Vehicle Number: {{item.vehicleNumber}}</ion-label>
            <ion-label color="primary">Vehicle Color: {{item.vehicleColor}}</ion-label>
          </ion-item>
          <div class="updateBtn">
            <ion-button class="success">
              <span>Update Vehicle</span>
            </ion-button>
            <ion-button class="danger" (click)="deleteVehicle(i)">
              <span>Delete Vehicle</span>
            </ion-button>
          </div>
        </ng-container>
      </ng-container>

      <!-- <ng-container *ngIf="vehicle!==undefined else noVehicles">
        <ng-container>
          <ion-item lines="none">
            <ion-label color="primary">Type: {{vehicle.vehicleType}}</ion-label>
            <ion-label color="primary">Name: {{vehicle.vehicleName}}</ion-label>
          </ion-item>
          <ion-item lines="none">
            <ion-label color="primary">Vehicle Number: {{vehicle.vehicleNumber}}</ion-label>
            <ion-label color="primary">Vehicle Color: {{vehicle.vehicleColor}}</ion-label>
          </ion-item>
          <div class="updateBtn">
            <ion-button class="success" (click)="openEditCard(true)">
              <span>Update Vehicle</span>
            </ion-button>
            <ion-button class="danger">
              <span>Delete Vehicle</span>
            </ion-button>
          </div>
        </ng-container>
        <ng-container>
          <ion-item lines="none" (click)="openEditCard(true)">
            <ion-icon slot="start" name="add-circle-outline"></ion-icon>
            <ion-label color="primary">Add vehicle</ion-label>
          </ion-item>
        </ng-container>
      </ng-container> -->

      <ng-template #noVehicles>
        <ion-item lines="none" (click)="openEditCard(true)">
          <ion-icon slot="start" name="add-circle-outline"></ion-icon>
          <ion-label color="primary">Add vehicle</ion-label>
        </ion-item>
      </ng-template>
    </ion-card-content>
  </ion-card>

</ion-content>