<ion-header [translucent]="true">
  <ion-toolbar>
    <ion-buttons slot="start">
      <ion-menu-button></ion-menu-button>
    </ion-buttons>
    <ion-title>ride-detail-view</ion-title>
  </ion-toolbar>
</ion-header>

<ion-content *ngIf="currentUser !== undefined">
  <ion-card>
    <ion-row class="ion-padding">
      <ion-col class="route" size="12">
        <p>Ride Route</p>
        <p> <b>Ride Id :</b> {{ ride.id }} </p>
      </ion-col>
      <ion-col size="12" class="">
        <div class="travelDetails">
          <div class="location">
            <div class="locationIcon svg-container">
              <img src="../../../assets/images/svgs/start.svg" alt="" class="pin-img">
              <img src="../../../assets/images/svgs/route.svg" alt="">
            </div>
            <div class="locationToFrom">
              <b class="">{{ ride.from }}</b>
              <p><b>{{ ride.distance }}, {{ride.duration}}</b></p>
            </div>
          </div>
        </div>
      </ion-col>

      <ion-col size="12" class="dest-container ion-padding-bottom">
        <div class="travelDetails">
          <div class="location end">
            <div class="locationIcon round">
              <img src="../../../assets/images/svgs/round.svg" alt="" class="pin-img red-filter ">
            </div>
            <b class="locationToFrom">{{ ride.to }}</b>
          </div>
        </div>
      </ion-col>
      <!--  -->
      <ion-col size="12" class="ride-detail-container">
        <div class="ride-detail">
          <b>Date</b>
          <p>{{ ride.date }}</p>
        </div>
        <div class="ride-detail">
          <b>Time</b>
          <p>{{ ride.time }}</p>
        </div>
        <div class="ride-detail">
          <b>Seat</b>
          <p>{{ ride.seatAvl }}</p>
        </div>
        <div class="ride-detail">
          <b>Price</b>
          <p>{{ ride.price }}</p>
        </div>
        <div class="ride-detail" *ngIf="ride.companionNames !== 'this is driver ride' ">
          <b>Companions Name</b>
          <p>{{ ride.companionNames }}</p>
        </div>

        <div class="ride-detail">
          <b>Ride status</b>
          <p [ngClass]="{
            'requestedCss': status === 'requested',
            'createdCss': status === 'created', 
            'acceptedCss': status === 'accepted',
            'ongoingCss': status === 'ongoing',
            'completedCss': status === 'completed',
            'canceledCss': status === 'canceled'
          }">
            <ng-container [ngSwitch]="status" class="statusArea">
              <ion-label *ngSwitchCase="'requested'">Requested </ion-label>
              <ion-label *ngSwitchCase="'created'">created </ion-label>
              <ion-label *ngSwitchCase="'accepted'">Accepted</ion-label>
              <ion-label *ngSwitchCase="'ongoing'">Ongoing</ion-label>
              <ion-label *ngSwitchCase="'completed'">Completed</ion-label>
              <ion-label *ngSwitchCase="'canceled'">Canceled</ion-label>
            </ng-container>
            <!-- {{ ride.companionNames }} -->
          </p>
        </div>
        <div class="ride-detail">
          <b>Transaction Status</b>
          <p>Paid</p>
        </div>
        <div class="ride-detail">
          <b>Total distance traveled</b>
          <p>custom 25km</p>
        </div>
        <div class="ride-detail">
          <b>Total traveled duration</b>
          <p>custom 2 hr</p>
        </div>
        <div class="ride-detail">
          <b>Resolution Status</b>
          <p>Flag raised pending / solved / resolved by admin</p>
        </div>
        <div size="12" class=" ">
          <ion-buttons slot="primary" (click)="editRide()">
            <ion-button fill="outline">
              Edit
              <ion-icon name="create"></ion-icon>
            </ion-button>
          </ion-buttons>
        </div>
      </ion-col>
    </ion-row>
  </ion-card>
  <ion-card>
    <ion-row class=" ion-padding">
      <ion-col class="route" size="12">
        <p>Driver Details</p>
      </ion-col>
      <ion-col size="12" class="">
        <p class="profile"><img [src]="ride.riderpicture" alt="Profile pic"><b>{{ ride.ridername }}</b></p>
      </ion-col>

      <ion-col size="12" class="dest-container">
        <ion-item lines="none" class="ion-no-padding">
          <ion-icon class="ion-padding-end" [color]="ride.riderEmail ? 'success':'medium'"
            [name]="ride.riderEmail ?'checkmark-circle-outline':'add-circle-outline'"></ion-icon>
          <ion-label *ngIf="!isEmailVerified" color="primary">
            Confirm email {{ride.riderEmail}}
          </ion-label>
          <ion-label *ngIf="isEmailVerified" color="primary">
            {{ride.riderEmail}}
          </ion-label>
        </ion-item>
        <ion-item lines="none" class="ion-no-padding">
          <ion-icon class="ion-padding-end" [color]="isPhoneVerified? 'success':'medium'"
            [name]="isPhoneVerified ? 'checkmark-circle-outline' : 'add-circle-outline'"></ion-icon>
          <ion-label *ngIf="!isPhoneVerified" color="primary">
            Confirm phone number
          </ion-label>
          <ion-label *ngIf="isPhoneVerified" color="primary">
            {{currentUser.phone}}
          </ion-label>
        </ion-item>
        <ion-item lines="none" class="ion-no-padding">

          <ion-label *ngIf="!currentUser.feedback.star" color="primary">
            No Rating
          </ion-label>
          <ion-label *ngIf="currentUser.feedback.star" color="primary">
            <ion-icon class="ion-padding-end" *ngFor="let star of [].constructor(5); let i = index"
              [name]="i < currentUser.feedback.star ? 'star' : 'star-outline'" color="warning">
            </ion-icon>
          </ion-label>
        </ion-item>
      </ion-col>
    </ion-row>
  </ion-card>
  <ion-card class="rideActivity">
    <ion-row class=" ion-padding">
      <ion-col class="route" size="12">
        <p>Ride Activity</p>
      </ion-col>
      <ion-col class=" " size="12">
        <div>
          <ion-buttons slot="primary">
            <ion-button fill="outline">
              Start Ride
              <!-- <ion-icon name="create"></ion-icon> -->
            </ion-button>
          </ion-buttons>
        </div>
        <div>
          <ion-buttons slot="primary">
            <ion-button fill="outline">
              Stop Ride
              <!-- <ion-icon name="create"></ion-icon> -->
            </ion-button>
          </ion-buttons>
        </div>
        <div>
          <ion-buttons slot="primary">
            <ion-button fill="outline">
              Discrepancy Flag
              <!-- <ion-icon name="create"></ion-icon> -->
            </ion-button>
          </ion-buttons>
        </div>

        <div>
          <ion-buttons slot="primary">
            <ion-button fill="outline">
              Pilot Agreement Companion Agreement
              <!-- <ion-icon name="create"></ion-icon> -->
            </ion-button>
          </ion-buttons>
        </div>
      </ion-col>
    </ion-row>
  </ion-card>
  <div class="cancelBtn ion-padding-horizontal ion-padding-bottom">
    <ion-button expand="block" id="open-cancel-dialog" class="danger"><span>Cancel
        Ride</span></ion-button>

    <ion-modal #modal trigger="open-cancel-dialog" class="cancelModal">
      <ng-template>
        <div class="ion-padding-horizontal">
          <h4>Are you want to cancel the ride, it is not reversible action!!</h4>

          <ion-row>
            <ion-col>
              <ion-item class="success ion-text-center" lines="none" button="true" detail="false"
                (click)="cancelRide()">
                <ion-label class="ion-padding-horizontal">Yes</ion-label>
              </ion-item>
            </ion-col>
            <ion-col>
              <ion-item class="danger ion-text-center" lines="none" button="true" detail="false"
                (click)="modal.dismiss()">
                <ion-label class="ion-padding-horizontal">No</ion-label>
              </ion-item>
            </ion-col>
          </ion-row>
        </div>
      </ng-template>
    </ion-modal>

  </div>
  <div class="ion-padding-horizontal ion-padding-bottom">
    <ion-button expand="block" class="primary" (click)="bookRide()"><span>Book Ride</span></ion-button>
  </div>

</ion-content>